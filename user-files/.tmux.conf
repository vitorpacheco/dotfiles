set-option -g default-shell /bin/zsh

# Prefix
set -g prefix C-Space
set -g prefix2 C-b
bind C-Space send-prefix

# General
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",*:RGB"
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on
set -g history-limit 50000
set -s escape-time 0
set -g focus-events on
set -g set-clipboard on
setw -g aggressive-resize on
set -g detach-on-destroy off

# Status bar
set -g status-position top
set -g status-interval 5
set -g status-left-length 30
set -g status-right-length 50
set -g window-status-separator ""

# Theme
set -g status-style "bg=default,fg=default"
set -g status-left "#[fg=black,bg=blue,bold] #S #[bg=default] "
set -g status-right "#[fg=blue]#{?client_prefix,PREFIX ,}#[fg=brightblack]#h "
set -g window-status-format "#[fg=brightblack] #I:#W "
set -g window-status-current-format "#[fg=blue,bold] #I:#W "
set -g pane-border-style "fg=brightblack"
set -g pane-active-border-style "fg=blue"
set -g message-style "bg=default,fg=blue"
set -g message-command-style "bg=default,fg=blue"
set -g mode-style "bg=blue,fg=black"
setw -g clock-mode-colour blue

# Reload config
bind M-r source-file ~/.tmux.conf \; display "Config reloaded!"

# Rename window / session
bind r command-prompt -I "#W" "rename-window -- '%%'"
bind R command-prompt -I "#S" "rename-session -- '%%'"

# Vi mode for copy
setw -g mode-keys vi
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection-and-cancel

# Pane resizing
bind -r S-Left resize-pane -L 10
bind -r S-Down resize-pane -D 10
bind -r S-Up resize-pane -U 10
bind -r S-Right resize-pane -R 10

# Saner splits that open in the same directory
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}" -p 25

# New windows in same directory
bind c new-window -c "#{pane_current_path}"

# Pane navigation
bind -n C-M-Left select-pane -L
bind -n C-M-Right select-pane -R
bind -n C-M-Up select-pane -U
bind -n C-M-Down select-pane -D

# Window navigation
bind -n M-Left previous-window
bind -n M-Right next-window

# Session navigation
bind -n C-S-Up switch-client -n
bind -n C-S-Down switch-client -p

# Sessions
bind C new-session
bind X kill-session

bind -r f run-shell "tmux neww ~/.local/scripts/tmux-sessionizer"

# set -g display-time 1000
# set -g renumber-panes on
# set-option -g default-terminal "tmux-256color"
# set -ag terminal-override ",xterm-256color:RGB"

# bind -n WheelUpPane if-shell -F "#{mouse_any_flag}" "send-keys -M" "copy-mode -e"
# bind -n WheelDownPane if-shell -F "#{mouse_any_flag}" "send-keys -M" "select-pane -t=."
# unbind -T copy-mode-vi MouseDragEnd1Pane # don't exit copy mode when dragging with mouse

# bind -n C-1 select-pane -t :.1
# bind -n C-2 select-pane -t :.2
# bind -n C-3 select-pane -t :.3
# bind -n C-4 select-pane -t :.4
# bind -n C-5 select-pane -t :.5
# bind -n C-6 select-pane -t :.6
# bind -n C-7 select-pane -t :.7
# bind -n C-8 select-pane -t :.8
# bind -n C-9 select-pane -t :.9
# bind -n C-0 select-pane -t :.10

# bind C-p previous-window
# bind C-n next-window
# bind j resize-pane -D 5
# bind k resize-pane -U 5
# bind l resize-pane -R 5
# bind h resize-pane -L 5
#
# bind -r e last-window
# bind -r m resize-pane -Z

set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect'
# set -g @plugin 'tmux-plugins/tmux-continuum'
# set -g @plugin 'tmux-plugins/yank'
# set -g @plugin 'tmux-plugins/copycat'
# set -g @plugin 'alexwforsythe/tmux-wich-key'
# set -g @plugin 'catppuccin/tmux#v2.1.3'

# set -g @continuum-restore 'on'
# set -g @resurrect-strategy-nvim 'session'

# set -g @catppuccin_flavor "mocha"
# set -g @catppuccin_window_status_style "rounded"

# set -g status-right-length 100
# set -g status-left-length 100
# set -g status-left ""
# set -g status-right "#{E:@catppuccin_status_application}"
# set -agF status-right "#{E:@catppuccin_status_cpu}"
# set -ag status-right "#{E:@catppuccin_status_session}"
# set -ag status-right "#{E:@catppuccin_status_uptime}"
# set -agF status-right "#{E:@catppuccin_status_battery}"

run '~/.tmux/plugins/tpm/tpm'
